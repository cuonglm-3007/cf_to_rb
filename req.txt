Các yêu cầu
version 1.0
- (done) Chuyển cờ  request.directory_home thành request[:directory_home],  request.directory_home.abc => @request[:directory_home][:anb]
- (done) Chuyển == 1 thành .to_i == 1, == 0 thành .to_s == "0"
- (done) Chuyển != "", neq "" thành .present?, == "", eq "" thành .blank?
- (done) Chuyển #?# => #{} với loại khác giao diện
- Chuyển query cho đúng dạng phù hợp
<cfquery name="qOuboshaDetail" datasource="#request.dsn#">
    SELECT
        tou.id AS oubosha_id,
        tou.mail,
        tou.mail_m,
        tou.tel,
        tou.tel_m
    FROM t_oubosha tou
    WHERE tou.id = <cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#getChatbotLog.oubosha_id#">
    AND tou.status_flg = <cfqueryparam cfsqltype="CF_SQL_INTEGER" value="1">
</cfquery>
Thành 
def qOuboshaDetail oubosha_id
    sql = ["SELECT
                tou.id AS oubosha_id,
                tou.mail,
                tou.mail_m,
                tou.tel,
                tou.tel_m
            FROM t_oubosha tou
            WHERE tou.id = ?
            AND tou.status_flg = 1>"]
    sql << oubosha_id

    find_by_sql sql
end
- Viết được rspec cho query đơn giản như trên